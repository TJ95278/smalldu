"use strict";var loginInfoObj,msg,res1,urlObj=getUrlVal(),cookieObj=myGetCookie();function getTimeStamp(){return(new Date).getTime()}console.log(cookieObj),cookieObj.login&&(1===(loginInfoObj=JSON.parse(cookieObj.login)).login?(console.log("已登录"),$("a[name=login]").html("欢迎您，"+loginInfoObj.name)):$("a[name=login]").html("登录")),$("[name=login]").click(function(){window.location.href="./login.html?url=".concat(window.location.href)});var check=0;function setHtml(n){n='\n          \n      <div class="panel panel-default">\n      <div class="panel-heading">\n        <h3 class="panel-title">商品详细信息</h3>\n      </div>\n      <div class="panel-body">\n        <div class="media">\n          <div class="media-left">\n            <a href="#">\n              <img class="media-object" src="https://product-online.cdn.bcebos.com/'.concat(n.picture.picId,'" alt="...">\n            </a>\n          </div>\n          <div class="media-body">\n            <h4 class="media-heading myName">').concat(n.skuName,"</h4>\n            <h5>").concat(n.skuDesc,'</h5>\n            <p>\n              <i class="glyphicon glyphicon-yen"></i>\n              <span>').concat(n.price/100,'</span>\n            </p>\n            <div class="btn-group skuNames" role="group" aria-label="...">\n            \n            </div>\n            <p>\n              <a href="javascript:;" class="btn btn-warning btn-lg" role="button">立即购买</a>\n              <a href="javascript:;" name="addCart" class="btn btn-danger btn-lg" role="button">加入购物车</a>\n            </p>\n          </div>\n        </div>\n        <ul class="nav nav-tabs">\n          <li role="presentation" class="active"><a href="#">商品详细信息</a></li>\n          <li role="presentation"><a href="#">商品参数信息</a></li>\n          <li role="presentation"><a href="#">相关商品</a></li>\n        </ul>\n        <div>\n          <h1>下面应该有大图<h1>\n        </div>\n      </div>\n    </div>\n          ');$(".container").html(n);var t="";msg.data[0].forEach(function(n,a){t+='\n   <button type="button" name=\'typeBtn\' class="btn btn-default myTypeBtn" index='.concat(a,">").concat(n.skuName,"</button>\n             \n")}),$(".skuNames").html(t)}$.ajax({url:"/xddetail1?timestamp=".concat(getTimeStamp(),"&spuNo=").concat(urlObj.spuNo,"&channelId=0&platformId=0"),contentType:"application/json;charset=UTF-8",type:"get",dataType:"json",success:function(n){setHtml((res1=msg=n).data[0][0])}}),$(".container").on("click",'[name="addCart"]',function(){var n,a,t;loginInfoObj&&1===loginInfoObj.login?null==(n=window.localStorage.getItem("cart"))?(msg.data[0][check].num=1,msg.data[0][check].buy=!0,a=[msg.data[0][check]],window.localStorage.setItem("cart",JSON.stringify(a)),window.alert("新增购物车，并添加一件商品:"+msg.data[0][check].skuName),window.confirm("是否需要跳转至购物车？")&&(window.location.href="./cart.html")):(n=JSON.parse(n),t=!0,n.forEach(function(n,a){n.skuNo===msg.data[0][check].skuNo&&(n.num++,t=!1,window.alert("购物车已有此件商品，数量+1    "+msg.data[0][check].skuName))}),t&&(msg.data[0][check].num=1,msg.data[0][check].buy=!0,n.push(msg.data[0][check]),window.alert("购物车无此件商品，成功加入购物车："+msg.data[0][check].skuName)),window.confirm("是否需要跳转至购物车？")&&(window.location.href="./cart.html"),window.localStorage.setItem("cart",JSON.stringify(n))):window.confirm("您还未登录，点击确定跳转至登录界面")&&(window.location.href="./login.html?url=".concat(window.location.href))}),$(".container").on("click","[name=typeBtn]",function(n){setHtml(res1.data[0][parseInt($(n.target).attr("index"))]),check=parseInt($(n.target).attr("index"))});